<!--
 Author: Edgar Butwilowski
 Copyright (c) Vermessungsamt Winterthur. All rights reserved.
-->
<div class="choose_device_main_div">
    <h1 style="font-weight: lighter;text-transform: uppercase;">Auswahl Spielger√§t</h1>
    <form class="choose_playground_type_form">
        <mat-form-field appearance="fill">
            <mat-label>Art der Inspektion</mat-label>
            <mat-select [formControl]="inspectionTypeControl" (selectionChange)='selectInspectionType()' required>
                <mat-option *ngFor="let inspectionType of availableInspectionTypes" [value]="inspectionType">
                    {{inspectionType}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </form>
    <br />
    <form class="playground-filter-form">
        <mat-form-field class="choose-playground" style="min-width: 70%;">
            <input type="text" placeholder="Spielplatzname" aria-label="Name" matInput
                [formControl]="playgroundSearchControl" [matAutocomplete]="auto">
            <mat-autocomplete (optionSelected)='selectPlayground()' autoActiveFirstOption #auto="matAutocomplete">
                <mat-option *ngFor="let playground of playgroundsFiltered | async" [value]="playground.name">
                    {{playground.name}}
                </mat-option>
            </mat-autocomplete>
        </mat-form-field>
    </form>
    <h2 *ngIf="playgroundService.selectedPlayground && playgroundService.selectedPlayground.name !== ''" style="font-weight: lighter;">{{
        playgroundService.selectedPlayground.name }}</h2>
    <div *ngIf="playgroundService.selectedPlayground && playgroundService.selectedPlayground.name !== ''">
        <div fxLayout="row wrap padding">
            <spk-device-card class="maincard" fxFlex.xs="100" fxFlex="32" fxFlex.md="32" fxFlex.sm="50"
                [playdevice]="playdevice" cardType="inspection" *ngFor="let playdevice of playgroundService.selectedPlayground.playdevices"></spk-device-card>
        </div>
    </div>
    <div *ngIf="playgroundService.selectedPlayground.playdevices.length != 0" style="margin: 1em;">
        <button mat-button (click)="sendReport()" [disabled]="!canFinish()"
            style="color: white;background-color: green;">ABSCHLIESSEN</button>
        <span *ngIf="sendFailureMessage && sendFailureMessage.startsWith('SPK')" style="color: red;margin: 1em;font-style: bold;">{{sendFailureMessage}}</span>
    </div>
</div>